## 캐싱 사용을 위한 축출 정책(Eviction Policies)

캐싱 층에는 한정된 분량의 메모리만이 존재함으로 모든 걸 캐시에 넣을 수 없다면 어떤 것이 캐시에 남아 데이터베이스를 히트할지 결정해야 한다.

### LRU(Least Recently Used;  최근 최소 사용) 알고리즘

- 캐시에서 최근에 최소로 사용된 항목을 축출하는 것으로, 캐시에서 최근에 가장 많이 사용된 항목을 유지한다.
- 캐시에서 뭔가 요청하게 되면 그 항목이 리스트의 앞에 위치하게 되며, 캐시에서 다른 항목을 요청하면 다른 항목의 리스트의 앞에 가게 된다. 그리고 항상 최근 최소 사용 항목, 즉 대부분의 시간 동안 살펴보지 않은 항목은 리스트의 끝에 놓이게 된다. 그리고 만약 공간이 부족하게 되면 리스트의 끝을 캐시에서 없앤다.
- 해시 맵을 모든 키에 대해 유지하고, 모든 키들은 캐시 자체에 해당 값이 저장된 곳을 가리킨디.
- 이 링크된 리스트에서는 항상 가장 최근에 접근한 항목을 앞으로 이동시키게 되며 최근에 최소로 접근한 항목은 뒤로 이동하고 헤드 포인터와 테일 포인터를 두어 해당 리스트의 헤드나 테일을 빠르게 참조할 수 있다.
- 따라서 만약 뭔가 축출해야 한다면 단순하게 테일 포인터의 위치를 보고 해당 항목의 메모리를 폐기한 뒤 테일 포인터를 바로 앞부분으로 가져온다.

### LFU(Least Frequently Used; 최소 사용 빈도)

- 일정 기간에 걸쳐 제시된 키가 얼마나 자주 히트하는지를 살펴본다.
- 이 경우 캐시에 실제로 어떤 항목을 유지해야 할지를 좀 더 잘 예측할 수 있다.
- LRU는 충분히 큰 캐시가 있다면 대규모 환경에서는 충분히 잘 작동하지만, 만약 캐시가 작은 경우, 즉 캐시에 남겨두거나 제거할 항목을 더 꼼꼼하게 결정해야 한다면 LFU가 더 나은 방법이다.

### FIFO(First In First Out; 선입선출)

- 캐시에 가장 먼저 넣은 항목이 나중에 가장 먼저 축출된다.

## 구체적인 캐싱 기술

### Memcached

- 매우 단순한 메모리 내부 키-값 저장소
- 이 키의 값을 회수하고 싶으면 캐시에게 전달해 달라고 요청하면 된다.
- 단순한 API, 검증된 오픈 소스, 오래 사용되어 왔으며 신뢰할 수 있는 기술

### Redis

- 스냅샷, 복제 능력, 그리고 트랜잭션 지원이나 pub/sub 등의 기능
- 즉 캐시에서 데이터를 발행하여 구독자들이 해당 데이터에 자동으로 변경을 신청할 수 있다
- 따라서 캐시를 사용하는 방법과 내부 데이터에 접근하는 방식의 애플리케이션에 더 많은 유연성을 제공하며, 단순한 키-값 저장소가 아니다.
- 또한 고급 데이터 구조를 처리할 수 있다.

### Ncache

- .NET 전용으로 제작되었고 Java와 Node.js를 지원한다

### Ehcache

- Java 캐싱 기술 - Java의 분산 맵으로 잘 써먹을 수 있다

### 클라우드 기반 캐싱 서비스

- Amazon Web Service, AWS에서 제공하는 ElastiCache - Amazon 캐시를 사용
- 즉 AWS 내부에 시스템을 구축하는 경우, 다른 애플리케이션 구성 요소와 같은 데이터 센터에 캐시 서버가 있기 때문에 Elasticache가 좋은 수단이 된다
- DynamoDB 등을 사용할 경우 ElastiCache를 쓰고 Lambda나 EC2 등을 구동하는 애플리케이션에도 적용할 수 있다
## 장애 극복 전략

### 수동 예비 방식(Cold Standby) 서버
<img width="550" alt="수동 예비 방식" src="https://user-images.githubusercontent.com/107941880/228850959-f578288c-f07b-4c3c-b2c1-579f8b7d65d8.png">

1. 데이터베이스 호스트에서 정기적으로 백업을 한다.
2. 백업을 스토리지 어딘가에 버린다. (S3나 다른 서버 어딘가)
3. 호스트가 다운되면 수동 예비 방식 데이터베이스 호스트로 백업 파일을 복원한다.
4. 그리고 트래픽을 새 호스트로 리디렉션하면 모든 것이 백업 및 실행된다.
- 장점
    - 필요할 때 언제든지 서버에 접근할 수 있다.
    - 저렴하고 간단하다.
- 단점
    - 다운 시간이 증가한다.
        - 새 서버를 제공하고 백업 복원 전에는 시스템을 백업하고 실행할 수 없기 때문이다.
        - 데이터가 많을수록 오래 걸린다.
    - 마지막 백업 이후 발생한 데이터는 손실된다.

### 예열 대기 방식(Warm Standby) 서버
<img width="550" alt="예열 대기 방식" src="https://user-images.githubusercontent.com/107941880/228850994-9944af92-6f30-4f9e-8f40-0a6c3d980ecc.png">

1. 기본 데이터베이스에서 백업 데이터베이스 호스트로 지속적으로 복사한다.
2. 기존 데이터베이스가 다운돼면 트래픽을 예열 대기 방식으로 리디렉션하면 된다.
- 장점
    - 다운 시간이 짧다
    - 데이터 손실도 거의 없다
- 단점 
  - 여전히 수직 스케일링이므로 단일 호스트가 제공하는 트래픽의 양이 제한된다.

> 💡 복사하는 방법

- 각 서버에 데이터를 동시에 기록한다.
- 대부분의 데이터베이스는 자체 복사 메커니즘이 있어서 데이터베이스 호스트가 2개 이상일 때 복사 메커니즘을 사용하면 데이터베이스가 자동으로 이를 관리한다.
- 따라서 기록되는 대로 다른 백업 호스트에 자동으로 복사되는 것이다.

### 상시 대기 방식(Hot Standby) 서버
<img width="550" alt="상시 대기 방식" src="https://user-images.githubusercontent.com/107941880/228851041-5a21fde2-9860-499e-a40e-2b9b08897ea4.png">

1. 복사본에 의지하지 않고, 웹 서버에서 모든 데이터베이스 인스턴스로 동시에 데이터를 기록한다.

   백엔드에 이 모든 것을 처리하는 복사 메커니즘은 없기 때문에 프론트엔드 웹 호스트가 다른 모든 백업 호스트를 동시에 기록하고 있다.

2. 호스트가 다운되면, 연결을 끊고 해당 트래픽을 상시 대기 방식에 리디렉션하면 된다.
- 장점
    - 분산도 하고 읽을 수도 있다.
    - 만약 모든 데이터베이스에 데이터를 동시에 기록하면, 그 데이터에서도 동시에 읽을 수 있게 되고, 수평 스케일링 솔루션에 좀 더 가까워진다.
